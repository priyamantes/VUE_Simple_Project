<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vue 3D Tilt Card</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #0b1220 60%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-wrap {
      perspective: 1500px;
    }

    .card {
      width: 360px;
      height: 480px;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      box-shadow: 0 18px 40px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.02);
      transform-style: preserve-3d;
      transition: box-shadow 250ms ease, transform 250ms ease;
      overflow: hidden;
      cursor: pointer;
      display: flex;
      align-items: flex-end;
    }

    .card-inner {
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 20px;
      gap: 18px;
    }

    .card-media {
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 64%; /* slightly larger so image is more visible */
      z-index: 1;
      transform-style: preserve-3d;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center; /* center the img inside the media area */
    }

    .card-media img {
      /* ensure the whole image is visible and centered */
      width: auto;
      max-width: 100%;
      height: 100%;
      max-height: 100%;
      object-fit: contain;
      transform-origin: center;
      transition: transform 400ms cubic-bezier(.2,.9,.2,1);
      will-change: transform;
    }

    .card-content {
      position: relative;
      z-index: 2;
      color: #e6eef8;
      backdrop-filter: blur(6px) saturate(120%);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 6px 18px rgba(2,6,23,0.55);
    }

    .title {
      font-size: 20px;
      margin: 0 0 6px 0;
      letter-spacing: 0.2px;
    }

    .subtitle {
      margin: 0 0 12px 0;
      opacity: 0.85;
      font-size: 13px;
    }

    .meta {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .btn {
      padding: 8px 14px;
      border-radius: 10px;
      border: none;
      background: linear-gradient(90deg, #6ee7b7, #3b82f6);
      color: #07203a;
      font-weight: 600;
      cursor: pointer;
      transform: translateZ(20px);
    }

    .badge {
      background: rgba(255,255,255,0.06);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      transform: translateZ(14px);
    }

    @media (max-width: 420px) {
      .card { width: 320px; height: 440px; }
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="card-wrap">
      <div
        ref="card"
        class="card"
        @mousemove="onMouseMove"
        @mouseleave="onMouseLeave"
        @touchmove.prevent="onTouchMove"
        @touchend="onTouchEnd"
      >
        <div class="card-inner" :style="innerStyle">
          <div class="card-media" :style="mediaStyle">
            <img src="virat.jpg" alt="landscape">
          </div>
          <div class="card-content">
            <h3 class="title">"VIRAT" THE KING "KOHLI"</h3>
            <p class="subtitle">Interactive 3D tilt effect using Vue</p>
            <div class="meta">
              <button class="btn">Explore</button>
              <span class="badge">New</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const { createApp, ref } = Vue;

    createApp({
      setup() {
        const card = ref(null);
        const innerStyle = ref({});
        const mediaStyle = ref({});

        const MAX_TILT = 18;
        const DEPTH = 30;
        const target = { rx: 0, ry: 0 };
        const current = { rx: 0, ry: 0 };
        let raf = null;

        function lerp(a, b, t) { return a + (b - a) * t; }
        function clamp(v, a, b) { return Math.max(a, Math.min(b, v)); }

        function updateAnimation() {
          current.rx = lerp(current.rx, target.rx, 0.12);
          current.ry = lerp(current.ry, target.ry, 0.12);
          const transform = `rotateX(${current.rx}deg) rotateY(${current.ry}deg)`;
          if (card.value) card.value.style.transform = transform;

          const innerZ = Math.max(0, DEPTH - Math.abs(current.rx) - Math.abs(current.ry));
          innerStyle.value = { transform: `translateZ(${innerZ}px)` };
          mediaStyle.value = { transform: `translateZ(${innerZ / 1.4}px) scale(${1 + innerZ / 600})` };

          raf = requestAnimationFrame(updateAnimation);
        }

        function onMouseMove(e) {
          const rect = card.value.getBoundingClientRect();
          const cx = rect.left + rect.width / 2;
          const cy = rect.top + rect.height / 2;
          const dx = e.clientX - cx;
          const dy = e.clientY - cy;

          const ry = (dx / (rect.width / 2)) * MAX_TILT;
          const rx = -(dy / (rect.height / 2)) * MAX_TILT;

          target.rx = clamp(rx, -MAX_TILT, MAX_TILT);
          target.ry = clamp(ry, -MAX_TILT, MAX_TILT);

          if (!raf) raf = requestAnimationFrame(updateAnimation);
        }

        function onMouseLeave() {
          target.rx = 0;
          target.ry = 0;
          setTimeout(() => {
            if (raf) { cancelAnimationFrame(raf); raf = null; }
          }, 500);
        }

        function onTouchMove(e) {
          if (!e.touches.length) return;
          const t = e.touches[0];
          onMouseMove({ clientX: t.clientX, clientY: t.clientY });
        }

        function onTouchEnd() {
          onMouseLeave();
        }

        return { card, innerStyle, mediaStyle, onMouseMove, onMouseLeave, onTouchMove, onTouchEnd };
      }
    }).mount('#app');
  </script>
</body>
</html>
